local bag_mock = {
    ["LoneWolf"] = {
        ["Eluff"] = {
            {
                "2453::::::::25:::::::::;12", -- [1]
                "2447::::::::25:::::::::;14", -- [2]
                "3355::::::::25:::::::::;16", -- [3]
                "785::::::::25:::::::::;20", -- [4]
                "1015::::::::25:::::::::", -- [5]
                "3372::::::::25:::::::::;20", -- [6]
                "7068::::::::25:::::::::;10", -- [7]
                "7068::::::::25:::::::::;7", -- [8]
                "6371::::::::25:::::::::;20", -- [9]
                "7070::::::::25:::::::::;6", -- [10]
                ["link"] = "4245::::::::25:::::::::",
                ["size"] = 10
            }, -- [1]
            {
                "7067::::::::25:::::::::;10", -- [1]
                "7067::::::::25:::::::::;10", -- [2]
                "7067::::::::25:::::::::;10", -- [3]
                "7067::::::::25:::::::::;10", -- [4]
                "212160::::::::25:::::::::", -- [5]
                nil, -- [6]
                "7067::::::::25:::::::::;8", -- [7]
                "7067::::::::25:::::::::;10", -- [8]
                "7067::::::::25:::::::::;10", -- [9]
                "7067::::::::25:::::::::;10", -- [10]
                ["link"] = "4245::::::::25:::::::::",
                ["size"] = 10
            }, -- [2]
            {
                "4306::::::::25:::::::::;4", -- [1]
                "2589::::::::25:::::::::;4", -- [2]
                "16647::::::::25:::::::::", -- [3]
                "1081::::::::25:::::::::", -- [4]
                "3174::::::::25:::::::::;2", -- [5]
                "3182::::::::25:::::::::", -- [6]
                nil, -- [7]
                "1299::::::::25:::::::::", -- [8]
                "16647::::::::25:::::::::", -- [9]
                "785::::::::25:::::::::;18", -- [10]
                ["link"] = "918::::::::25:::::::::",
                ["size"] = 10
            }, -- [3]
            {
                "9801::::::509:1073548544:25:::::::::", -- [1]
                "1822::::::::25:::::::::", -- [2]
                "1753::::::::25:::::::::", -- [3]
                "2592::::::::25:::::::::;2", -- [4]
                "211490::::::::25:::::::::", -- [5]
                "2450::::::::25:::::::::;4", -- [6]
                "2251::::::::25:::::::::", -- [7]
                "1753::::::::25:::::::::", -- [8]
                ["link"] = "5573::::::::25:::::::::",
                ["size"] = 8
            }, -- [4]
            [0] = {
                "6948::::::::25:::::::::", -- [1]
                "3357::::::::25:::::::::;20", -- [2]
                "3357::::::::25:::::::::;5", -- [3]
                "2450::::::::25:::::::::;20", -- [4]
                "2450::::::::25:::::::::;20", -- [5]
                "3820::::::::25:::::::::;20", -- [6]
                "3820::::::::25:::::::::;10", -- [7]
                "765::::::::25:::::::::;10", -- [8]
                "2449::::::::25:::::::::;20", -- [9]
                "2449::::::::25:::::::::;20", -- [10]
                "2449::::::::25:::::::::;17", -- [11]
                "2452::::::::25:::::::::;20", -- [12]
                "2452::::::::25:::::::::;14", -- [13]
                "3356::::::::25:::::::::;20", -- [14]
                "3356::::::::25:::::::::;12", -- [15]
                "2453::::::::25:::::::::;20", -- [16]
                ["size"] = 16
            },
            ["guild"] = {
                [3] = 0
            },
            ["money"] = 248559,
            ["class"] = "PRIEST",
            ["race"] = "Scourge",
            [-1] = {},
            ["equip"] = {"209683::::::::25:::::::::", -- [1]
            "209825::::::::25:::::::::", -- [2]
            "3748::::::::25:::::::::", -- [3]
            "5107::::::::25:::::::::", -- [4]
            "209671::::::::25:::::::::", -- [5]
            "6392::::::::25:::::::::", -- [6]
            "209667::::::::25:::::::::", -- [7]
            "13099::::::::25:::::::::", -- [8]
            "14177::::::113:351551104:25:::::::::", -- [9]
            "6615::::::766:1749420416:25:::::::::", -- [10]
            "209668::::::::25:::::::::", -- [11]
            "6463::::::::25:::::::::", -- [12]
            "211450::::::::25:::::::::", -- [13]
            nil, -- [14]
            "6614::::::2032:1568992896:25:::::::::", -- [15]
            "209561:255:::::::25:::::::::", -- [16]
            nil, -- [17]
            "211461::::::::25:::::::::" -- [18]
            },
            ["level"] = 25,
            ["faction"] = false,
            ["sex"] = 2
        },
        ["Eluffstuff"] = {
            {
                ["size"] = 8,
                ["link"] = "4240::::::::1:::::::::"
            }, -- [1]
            {
                ["size"] = 8,
                ["link"] = "4240::::::::1:::::::::"
            }, -- [2]
            {
                ["size"] = 8,
                ["link"] = "4240::::::::1:::::::::"
            }, -- [3]
            {
                ["size"] = 8,
                ["link"] = "4240::::::::1:::::::::"
            }, -- [4]
            [0] = {
                "6948::::::::1:::::::::", -- [1]
                "11407::::::::1:::::::::;3", -- [2]
                "2592::::::::1:::::::::;20", -- [3]
                "2592::::::::1:::::::::;14", -- [4]
                "2251::::::::1:::::::::;3", -- [5]
                "1210::::::::1:::::::::;5", -- [6]
                "3193::::::136:106992640:1:::::::::", -- [7]
                "3065::::::::1:::::::::", -- [8]
                "15517::::::115:771223808:1:::::::::", -- [9]
                ["size"] = 16
            },
            ["guild"] = {
                [3] = 0
            },
            ["money"] = 70575,
            ["class"] = "WARRIOR",
            ["race"] = "Tauren",
            ["faction"] = false,
            ["equip"] = {
                [4] = "6125::::::::1:::::::::",
                [7] = "139::::::::1:::::::::"
            },
            ["level"] = 1,
            ["sex"] = 3,
            [-1] = {}
        }
    }
}

local bag_browser = require("bag_browser")
local raw_bag_mock = bag_mock["LoneWolf"]["Eluff"]
local clean_bag_mock = bag_browser.get_bag_contents(raw_bag_mock)
local herbs_in_mock_bag = bag_browser.get_all_herbs_from_inventory(clean_bag_mock)

local all_recipes = require("alchemy_recipes");
local available_recipes_finder = require("available_recipes_finder");

local filtered_recipes = available_recipes_finder.get_available_recipes_from_inventory(herbs_in_mock_bag, all_recipes)

for id, count in pairs(herbs_in_mock_bag) do
    print("Item ID: " .. id .. ", Count: " .. count)
end

print("Available recipes:");

-- Print the available recipes
for _, recipe in ipairs(filtered_recipes) do
    print("Can craft: " .. recipe.name)
end
